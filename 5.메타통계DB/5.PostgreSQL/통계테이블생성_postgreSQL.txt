-- CNCR_TBL_COL_DTRN_STATS definition

CREATE TABLE CNCR_TBL_COL_DTRN_STATS (	HOSP_CD	VARCHAR(20)	NOT NULL	,
	TBL_ID	VARCHAR(20)	NOT NULL	,
	COL_ID	VARCHAR(20)	NOT NULL	,
	COL_SEQ	NUMERIC(3)		,
	ROW_CNT	NUMERIC(20)		,
	NULL_NCS	NUMERIC(20)		,
	PT_CNT	NUMERIC(20)		,
	AVE_VL	NUMERIC(20)		,
	MIN_VL	NUMERIC(20)		,
	N1_QRTL_CNT	NUMERIC(30)		,
	N2_QRTL_CNT	NUMERIC(30)		,
	N3_QRTL_CNT	NUMERIC(30)		,
	N4_QRTL_CNT	NUMERIC(30)		,
	MODE_VL	NUMERIC(20)		,
	STATS_WORK_YMD	VARCHAR(8)	NOT NULL	,
	COLL_STRT_YMD	VARCHAR(8)	NOT NULL	,
	COLL_END_YMD	VARCHAR(8)	NOT NULL	,
	CRTN_DT	DATE	NOT NULL	);

ALTER TABLE CNCR_TBL_COL_DTRN_STATS ADD CONSTRAINT CNCR_TBL_COL_DTRN_STATS_PK PRIMARY KEY (HOSP_CD, TBL_ID, COL_ID);
COMMENT ON TABLE CNCR_TBL_COL_DTRN_STATS IS '암_테이블_컬럼_기간_통계';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.COL_ID IS '컬럼ID';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.COL_SEQ IS '컬럼순번';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.ROW_CNT IS 'ROW수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.NULL_NCS IS 'NULL건수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.PT_CNT IS '환자수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.AVE_VL IS '평균값';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.MIN_VL IS '최소값';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.N1_QRTL_CNT IS '1사분위수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.N2_QRTL_CNT IS '2사분위수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.N3_QRTL_CNT IS '3사분위수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.N4_QRTL_CNT IS '4사분위수';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.MODE_VL IS '최빈값';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.STATS_WORK_YMD IS '통계작업일자';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.COLL_STRT_YMD IS '수집시작일자';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.COLL_END_YMD IS '수집종료일자';
COMMENT ON COLUMN CNCR_TBL_COL_DTRN_STATS.CRTN_DT IS '생성일시';



-- CNCR_TBL_CD_DTRN_STATS definition

CREATE TABLE CNCR_TBL_CD_DTRN_STATS (	HOSP_CD	VARCHAR(20)	NOT NULL	,
	TBL_ID	VARCHAR(20)	NOT NULL	,
	COL_ID	VARCHAR(20)	NOT NULL	,
	CD_VL	VARCHAR(200)	NOT NULL	,
	COL_SEQ	NUMERIC(3)		,
	ROW_CNT	NUMERIC(20)		,
	PT_CNT	NUMERIC(20)		,
	STATS_WORK_YMD	VARCHAR(8)	NOT NULL	,
	COLL_STRT_YMD	VARCHAR(8)	NOT NULL	,
	COLL_END_YMD	VARCHAR(8)	NOT NULL	,
	CRTN_DT	DATE	NOT NULL	);

ALTER TABLE CNCR_TBL_CD_DTRN_STATS ADD CONSTRAINT CNCR_TBL_CD_DTRN_STATS_PK PRIMARY KEY (HOSP_CD, TBL_ID, COL_ID,CD_VL);
COMMENT ON TABLE CNCR_TBL_CD_DTRN_STATS IS '암_테이블_코드_기간_통계';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.COL_ID IS '컬럼ID';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.CD_VL IS '코드값';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.COL_SEQ IS '컬럼순번';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.ROW_CNT IS 'ROW수';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.PT_CNT IS '환자수';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.STATS_WORK_YMD IS '통계작업일자';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.COLL_STRT_YMD IS '수집시작일자';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.COLL_END_YMD IS '수집종료일자';
COMMENT ON COLUMN CNCR_TBL_CD_DTRN_STATS.CRTN_DT IS '생성일시';


-- CNCR_TBL_COL_YR_STATS definition

CREATE TABLE CNCR_TBL_COL_YR_STATS (	HOSP_CD	VARCHAR(20)	NOT NULL	,
	TBL_ID	VARCHAR(20)	NOT NULL	,
	COL_ID	VARCHAR(20)	NOT NULL	,
	COL_SEQ	NUMERIC(3)	NOT NULL	,
	CRIT_YR	VARCHAR(4)	NOT NULL	,
	ROW_CNT	NUMERIC(20)		,
	PT_CNT	NUMERIC(20)		,
	STATS_WORK_YMD	VARCHAR(8)	NOT NULL	,
	COLL_STRT_YMD	VARCHAR(8)	NOT NULL	,
	COLL_END_YMD	VARCHAR(8)	NOT NULL	,
	CRTN_DT	DATE	NOT NULL	);

ALTER TABLE CNCR_TBL_COL_YR_STATS ADD CONSTRAINT CNCR_TBL_COL_YR_STATS_PK PRIMARY KEY (HOSP_CD, TBL_ID, COL_ID,COL_SEQ,CRIT_YR);
COMMENT ON TABLE CNCR_TBL_COL_YR_STATS IS '암_테이블_컬럼_전체_통계';

COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.COL_ID IS '컬럼ID';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.COL_SEQ IS '컬럼순번';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.CRIT_YR IS '기준년도';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.ROW_CNT IS 'ROW수';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.PT_CNT IS '환자수';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.STATS_WORK_YMD IS '통계작업일자';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.COLL_STRT_YMD IS '수집시작일자';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.COLL_END_YMD IS '수집종료일자';
COMMENT ON COLUMN CNCR_TBL_COL_YR_STATS.CRTN_DT IS '생성일시';



-- CNCR_TBL_CD_YR_STATS definition

CREATE TABLE CNCR_TBL_CD_YR_STATS (	HOSP_CD	VARCHAR(20)	NOT NULL	,
	TBL_ID	VARCHAR(20)	NOT NULL	,
	COL_ID	VARCHAR(20)	NOT NULL	,
	CD_VL	VARCHAR(200)	NOT NULL	,
	COL_SEQ	NUMERIC(3)	NOT NULL	,
	CRIT_YR	VARCHAR(4)	NOT NULL	,
	ROW_CNT	NUMERIC(20)		,
	PT_CNT	NUMERIC(20)		,
	STATS_WORK_YMD	VARCHAR(8)	NOT NULL	,
	COLL_STRT_YMD	VARCHAR(8)	NOT NULL	,
	COLL_END_YMD	VARCHAR(8)	NOT NULL	,
	CRTN_DT	DATE	NOT NULL	);


ALTER TABLE CNCR_TBL_CD_YR_STATS ADD CONSTRAINT CNCR_TBL_CD_YR_STATS_PK PRIMARY KEY (HOSP_CD, TBL_ID, COL_ID,CD_VL,COL_SEQ,CRIT_YR);
COMMENT ON TABLE CNCR_TBL_CD_YR_STATS IS '암_테이블_코드_전체_통계';

COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.COL_ID IS '컬럼ID';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.CD_VL IS '코드값';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.COL_SEQ IS '컬럼순번';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.CRIT_YR IS '기준년도';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.ROW_CNT IS 'ROW수';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.PT_CNT IS '환자수';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.STATS_WORK_YMD IS '통계작업일자';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.COLL_STRT_YMD IS '수집시작일자';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.COLL_END_YMD IS '수집종료일자';
COMMENT ON COLUMN CNCR_TBL_CD_YR_STATS.CRTN_DT IS '생성일시';



-- CNCR_TBL_META definition

CREATE TABLE CNCR_TBL_META (	TBL_ID	VARCHAR(20)	NOT NULL	,
	TBL_LCLS_CD	VARCHAR(20)		,
	TBL_MCLS_CD	VARCHAR(20)		,
	ENG_TBL_NM	VARCHAR(200)		,
	KOR_TBL_NM	VARCHAR(1000)		,
	TBL_EXPL_CONT	VARCHAR(4000)		,
	YR_CRIT_ENG_COL_NM	VARCHAR(200)		,
	CRTN_DT	DATE	NOT NULL	);

ALTER TABLE CNCR_TBL_META ADD CONSTRAINT CNCR_TBL_META_PK PRIMARY KEY (TBL_ID);
COMMENT ON TABLE CNCR_TBL_META IS '암_테이블_메타';

COMMENT ON COLUMN CNCR_TBL_META.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_META.TBL_LCLS_CD IS '테이블대분류코드';
COMMENT ON COLUMN CNCR_TBL_META.TBL_MCLS_CD IS '테이블중분류코드';
COMMENT ON COLUMN CNCR_TBL_META.ENG_TBL_NM IS '영문테이블명';
COMMENT ON COLUMN CNCR_TBL_META.KOR_TBL_NM IS '한글테이블명';
COMMENT ON COLUMN CNCR_TBL_META.TBL_EXPL_CONT IS '테이블설명내용';
COMMENT ON COLUMN CNCR_TBL_META.YR_CRIT_ENG_COL_NM IS '년도기준영문컬럼명';
COMMENT ON COLUMN CNCR_TBL_META.CRTN_DT IS '생성일시';



-- CNCR_TBL_COL_META definition

CREATE TABLE CNCR_TBL_COL_META (	TBL_ID	VARCHAR(20)	NOT NULL	,
	COL_ID	VARCHAR(20)		,
	TBL_LCLS_CD	VARCHAR(20)		,
	TBL_MCLS_CD	VARCHAR(20)		,
	ENG_TBL_NM	VARCHAR(200)		,
	KOR_TBL_NM	VARCHAR(1000)		,
	ENG_COL_NM	VARCHAR(200)		,
	KOR_COL_NM	VARCHAR(1000)		,
	COL_SEQ	NUMERIC(3)		,
	COL_PK_YN	VARCHAR(20)		,
	DOMN_NM	VARCHAR(1000)		,
	DATA_TP_CONT	VARCHAR(100)		,
	DATA_LNTH_CONT	VARCHAR(100)		,
	COL_EXPL_CONT	VARCHAR(4000)		,
	CD_NM	VARCHAR(200)		,
	CD_CLCD	VARCHAR(20)		,
	HOSP_CD	VARCHAR(20)		,
	OPEN_YN	VARCHAR(20)		,
	CRTN_DT	DATE	NOT NULL	);

ALTER TABLE CNCR_TBL_COL_META ADD CONSTRAINT CNCR_TBL_COL_META_PK PRIMARY KEY (TBL_ID, COL_ID);
COMMENT ON TABLE CNCR_TBL_COL_META IS '암_테이블_컬럼_메타';

COMMENT ON COLUMN CNCR_TBL_COL_META.TBL_ID IS '테이블ID';
COMMENT ON COLUMN CNCR_TBL_COL_META.COL_ID IS '컬럼ID';
COMMENT ON COLUMN CNCR_TBL_COL_META.TBL_LCLS_CD IS '테이블대분류코드';
COMMENT ON COLUMN CNCR_TBL_COL_META.TBL_MCLS_CD IS '테이블중분류코드';
COMMENT ON COLUMN CNCR_TBL_COL_META.ENG_TBL_NM IS '영문테이블명';
COMMENT ON COLUMN CNCR_TBL_COL_META.KOR_TBL_NM IS '한글테이블명';
COMMENT ON COLUMN CNCR_TBL_COL_META.ENG_COL_NM IS '영문컬럼명';
COMMENT ON COLUMN CNCR_TBL_COL_META.KOR_COL_NM IS '한글컬럼명';
COMMENT ON COLUMN CNCR_TBL_COL_META.COL_SEQ IS '컬럼순번';
COMMENT ON COLUMN CNCR_TBL_COL_META.COL_PK_YN IS '컬럼PK여부';
COMMENT ON COLUMN CNCR_TBL_COL_META.DOMN_NM IS '도메인명';
COMMENT ON COLUMN CNCR_TBL_COL_META.DATA_TP_CONT IS '데이터타입내용';
COMMENT ON COLUMN CNCR_TBL_COL_META.DATA_LNTH_CONT IS '데이터길이내용';
COMMENT ON COLUMN CNCR_TBL_COL_META.COL_EXPL_CONT IS '컬럼설명내용';
COMMENT ON COLUMN CNCR_TBL_COL_META.CD_NM IS '코드명';
COMMENT ON COLUMN CNCR_TBL_COL_META.CD_CLCD IS '코드분류코드';
COMMENT ON COLUMN CNCR_TBL_COL_META.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_TBL_COL_META.OPEN_YN IS '공개여부';
COMMENT ON COLUMN CNCR_TBL_COL_META.CRTN_DT IS '생성일시';



-- CNCR_CODE_META definition

CREATE TABLE CNCR_CODE_META (	HOSP_CD	VARCHAR(20)	NOT NULL	,
	CD_CLCD	VARCHAR(20)	NOT NULL	,
	CD_ID	VARCHAR(20)	NOT NULL	,
	CD_NM	VARCHAR(200)	NOT NULL	,
	CD_VL	VARCHAR(200)	NOT NULL	,
	CD_VL_NM	VARCHAR(200)	NOT NULL	,
	ARRY_ORD_VL	NUMERIC(10)	NOT NULL	,
	CD_EXPL_CONT	VARCHAR(4000)		,
	CRTN_DT	DATE	NOT NULL	);



ALTER TABLE CNCR_CODE_META ADD CONSTRAINT CNCR_CODE_META_PK PRIMARY KEY (HOSP_CD,CD_CLCD,CD_ID,CD_NM,CD_VL);
COMMENT ON TABLE CNCR_CODE_META IS '암_코드_메타';

COMMENT ON COLUMN CNCR_CODE_META.HOSP_CD IS '병원코드';
COMMENT ON COLUMN CNCR_CODE_META.CD_CLCD IS '코드분류코드';
COMMENT ON COLUMN CNCR_CODE_META.CD_ID IS '코드ID';
COMMENT ON COLUMN CNCR_CODE_META.CD_NM IS '코드명';
COMMENT ON COLUMN CNCR_CODE_META.CD_VL IS '코드값';
COMMENT ON COLUMN CNCR_CODE_META.CD_VL_NM IS '코드값명';
COMMENT ON COLUMN CNCR_CODE_META.ARRY_ORD_VL IS '정렬순서값';
COMMENT ON COLUMN CNCR_CODE_META.CD_EXPL_CONT IS '코드설명내용';
COMMENT ON COLUMN CNCR_CODE_META.CRTN_DT IS '생성일시';

		
CREATE TABLE CNCR_TBL_SMRY_STATS(			
SMRY_STATS_NO 	VARCHAR(10)		,
HOSP_CD	VARCHAR(20)		,
CRIT_YR	VARCHAR(4)		,
SMRY_STATS_NM	VARCHAR(1000)		,
TBL_ID	VARCHAR(20)		,
COL_ID	VARCHAR(20)		,
PT_AGE	NUMERIC(4)		,
PT_SEX_CD	VARCHAR(20)		,
STATS_TRGT_VL	NVARCHAR(4000)		,
NCS	NUMERIC(20)		,
WHOL_NCS	NUMERIC(20)		,
PT_CNT	NUMERIC(20)		,
WHOL_PT_CNT	NUMERIC(20)		,
STATS_WORK_YMD	VARCHAR(8)		,
COLL_STRT_YMD	VARCHAR(8)		,
COLL_END_YMD	VARCHAR(8)		,
CRTN_DT	TIMESTAMP		
) ;			
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN SMRY_STATS_NO SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN HOSP_CD SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN CRIT_YR SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN SMRY_STATS_NM SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN TBL_ID SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN COL_ID SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN STATS_WORK_YMD SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN COLL_STRT_YMD SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN COLL_END_YMD SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	 ALTER COLUMN CRTN_DT SET NOT NULL		;
ALTER TABLE CNCR_TBL_SMRY_STATS	ADD CONSTRAINT CNCR_TBL_SMRY_STATS_PK	PRIMARY KEY (SMRY_STATS_NO,HOSP_CD,CRIT_YR,PT_AGE,PT_SEX_CD,STATS_TRGT_VL)	;






